<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Login ‚Äì Civic Voice</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  background:#0A2540;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  font-family:Poppins,sans-serif;
}
.login-box{
  background:white;
  padding:40px;
  border-radius:15px;
  width:350px;
  text-align:center;
  box-shadow:0 10px 30px rgba(0,0,0,.4);
}
input{
  width:100%;
  padding:12px;
  margin:15px 0;
  border-radius:8px;
  border:1px solid #ccc;
}
  footer {
    background:#0A2540;
  color:white;
      text-align: center;
      padding: 20px;
      font-size: 14px;
    }

button{
  width:100%;
  background:#1ABC9C;
  color:white;
  border:none;
  padding:12px;
  border-radius:8px;
  font-size:18px;
  cursor:pointer;
}
#msg{color:red;margin-top:10px;}
.sidebar {
  position: fixed;
  top: 0;
  left: -260px; /* Hidden initially */
  width: 260px;
  height: 100%;
  background: var(--primary);
  color: var(--text-light);
  transition: left 0.4s ease;
  z-index: 1000;
  overflow-y: auto;
}
.sidebar.active { left: 0; }

/* Logo in sidebar */
.sidebar-header {
  text-align:center;
  padding:20px 0;
  border-bottom:1px solid rgba(255,255,255,0.2);
}
.sidebar-header img {
  width:60px;
  height:60px;
  border-radius:12px;
  box-shadow:0 4px 12px rgba(0,0,0,0.2);
  transition: transform 0.3s;
}
.sidebar-header img:hover { transform: scale(1.05); }
.sidebar-header h2 {
  color:white;
  margin-top:10px;
  font-size:18px;
  font-weight:600;
}

/* Sidebar links */
.sidebar ul { list-style:none; padding:0; margin-top:20px; }
.sidebar ul li a {
  display:block;
  padding:15px 30px;
  color:white;
  text-decoration:none;
  transition: background 0.3s;
}
.sidebar ul li a:hover { background:var(--accent); }

/* Hamburger */
.hamburger {
  font-size:28px;
  cursor:pointer;
  position:fixed;
  top:15px;
  left:15px;
  color:var(--primary);
  z-index:1100;
}
@media(max-width:480px){
  .login-box{
    width:90%;
    padding:25px;
  }
}

</style>
</head>
<body>
<!-- Sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-header">
    <img src="images/cv-logo.png" alt="Civic Voice Logo">

    <h2>Civic Voice</h2>
  </div>
  <ul>
    <li><a href="Home.html">Home</a></li>
    <li><a href="Report.html">Report Issue</a></li>
    <li><a href="Issues.html">Live Issues</a></li>
    <li><a href="Profile.html">My Profile</a></li>
    <li id="adminLink" style="display:none"><a href="admin.html">Admin Panel</a></li>
  </ul>
</div>

<!-- Hamburger -->
<div class="hamburger" onclick="toggleSidebar()">‚ò∞</div>
<div class="login-box">
  <h2>üèõ Civic Voice Admin</h2>
  <input id="user" placeholder="Username">
  <input id="pass" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
  <p id="msg"></p>
</div>

<script>
function login() {
  const email = document.getElementById("user").value.trim();
  const password = document.getElementById("pass").value.trim();
  const msg = document.getElementById("msg");

  if (!email || !password) {
    msg.innerText = "Please enter username and password";
    return;
  }

  fetch("https://civic-voice-backend-1.onrender.com/api/auth/login", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({ email, password })
  })
  .then(res => res.json())
  .then(data => {
    if (data.token) {
      localStorage.setItem("token", data.token);

      if (data.isAdmin) {
        localStorage.setItem("civicAdmin", "true");
        window.location.href = "Admin.html";
      } else {
        window.location.href = "Home.html";
      }
    } else {
      msg.innerText = data.msg || "Login failed";
    }
  })
  .catch(err => {
    console.error(err);
    msg.innerText = "Server error. Try again later.";
  });
}
</script>


<br><br>
<footer>
  <img src="images/cv-logo.png" alt="Civic Voice Logo" style="width:30px; height:30px; vertical-align:middle;"> Civic Voice ¬© 2026 | Professional Government Portal
</footer>

</body>
</html>
